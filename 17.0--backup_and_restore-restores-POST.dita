<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//IBM//DTD DITA IBM Reference//EN" "dtd/ibm-reference.dtd">
<reference id="api-17.0--backup_and_restore-restores-POST" xml:lang="en-us">
<title>POST /backup_and_restore/restores</title>
<shortdesc>Creates a restore object in the PENDING state.</shortdesc>
<prolog>
<metadata>
<keywords>
<apiname>/backup_and_restore/restores</apiname>
<keyword>POST</keyword>
<keyword>API</keyword>
<keyword>REST API</keyword>
</keywords>
</metadata>
</prolog>
<refbody>
<refsyn>

 Only a single restore record can be created at a time and all other existing restores must be in a completed state. A completed restore has the status of SUCCESS or FAILED.
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /backup_and_restore/restores resource details</title>
<desc><p outputclass="summary">POST /backup_and_restore/restores resource details</p></desc>
<tgroup cols="1">
<colspec colname="col1" colwidth="1*" />
<thead>
<row valign="bottom">
<entry colname="col1">MIME Type</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>application/json
</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /backup_and_restore/restores request parameter details</title>
<desc><p outputclass="summary">POST /backup_and_restore/restores request parameter details</p></desc>
<tgroup cols="6">
<colspec colname="col1" colwidth="1*" />
<colspec colname="col2" colwidth="1*" />
<colspec colname="col3" colwidth="1*" />
<colspec colname="col4" colwidth="1*" />
<colspec colname="col5" colwidth="1*" />
<colspec colname="col6" colwidth="2*" />
<thead>
<row valign="bottom">
<entry colname="col1">Parameter</entry>
<entry colname="col2">Type</entry>
<entry colname="col3">Optionality</entry>
<entry colname="col4">Data Type</entry>
<entry colname="col5">MIME Type</entry>
<entry colname="col6">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>fields</p></entry>
<entry colname="col2"><p>header</p></entry>
<entry colname="col3"><p>Optional</p></entry>
<entry colname="col4"><p>String</p></entry>
<entry colname="col5"><p>text/plain</p></entry>
<entry colname="col6"><p>Optional - Use this parameter to specify which fields you would like to get back in the response. Fields that are not named are excluded. Specify subfields in brackets and multiple fields in the same object are separated by commas.</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /backup_and_restore/restores request body details</title>
<desc><p outputclass="summary">POST /backup_and_restore/restores request body details</p></desc>
<tgroup cols="5">
<colspec colname="col1" colwidth="1*" />
<colspec colname="col2" colwidth="1*" />
<colspec colname="col3" colwidth="1*" />
<colspec colname="col4" colwidth="2*" />
<colspec colname="col5" colwidth="2*" />
<thead>
<row valign="bottom">
<entry colname="col1">Parameter</entry>
<entry colname="col2">Data Type</entry>
<entry colname="col3">MIME Type</entry>
<entry colname="col4">Description</entry>
<entry colname="col5">Sample</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>restore</p></entry>
<entry colname="col2"><p>Object</p></entry>
<entry colname="col3"><p>application/json</p></entry>
<entry colname="col4"><p>Required. A single restore object has the following modifiable fields:
 <ul>
 <li><b>groups</b> - Required - Array of Enumeration - The set of groups that are included with the restore. These groups contain a subset of the following values: CUSTOM_RULES_CONFIG, DEPLOYMENT_CONFIG, USERS_CONFIG, LICENSE_CONFIG, QVM_CONFIG, INSTALLED_APPS_CONFIG, REPORT_TEMPLATES, ASSETS_DATA, OFFENSES_DATA.</li>
 <li><b>backup_id</b> - Required - Long - The ID of the backup to restore.</li>
 </ul>
 Any other set fields will be ignored.</p></entry>
<entry colname="col5"><p>{
  "backup_id": 42,
  "groups": [
    "CUSTOM_RULES_CONFIG",
    "DEPLOYMENT_CONFIG", 
    "USERS_CONFIG",
    "LICENSE_CONFIG",
    "QVM_CONFIG", 
    "INSTALLED_APPS_CONFIG", 
    "ASSETS_DATA", 
    "OFFENSES_DATA"
  ]
}</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /backup_and_restore/restores response codes</title>
<desc><p outputclass="summary">POST /backup_and_restore/restores response codes</p></desc>
<tgroup cols="3">
<colspec colname="col1" colwidth="1*" />
<colspec colname="col2" colwidth="1*" />
<colspec colname="col3" colwidth="3*" />
<thead>
<row valign="bottom">
<entry colname="col1">HTTP Response Code</entry>
<entry colname="col2">Unique Code</entry>
<entry colname="col3">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>201</p></entry>
<entry colname="col2"><p/></entry>
<entry colname="col3"><p>The restore was created.</p></entry>
</row>
<row>
<entry colname="col1"><p>409</p></entry>
<entry colname="col2"><p>1011</p></entry>
<entry colname="col3"><p>A restore is currently pending or in progress. Only a single restore record can be created at a time and all other existing restores must be in a completed state. A completed restore has the status of SUCCESS or FAILED.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1002</p></entry>
<entry colname="col3"><p>The 'backup_id' parameter value cannot be null or empty.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1003</p></entry>
<entry colname="col3"><p>The backup does not exist.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1004</p></entry>
<entry colname="col3"><p>The backup type must be config.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1005</p></entry>
<entry colname="col3"><p>The backup status must be successful.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1006</p></entry>
<entry colname="col3"><p>The backup must be valid.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1007</p></entry>
<entry colname="col3"><p>The backup must be compatible.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1008</p></entry>
<entry colname="col3"><p>The 'groups' parameter value cannot be null or empty.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1009</p></entry>
<entry colname="col3"><p>The DEPLOYMENT_CONFIG group must be included with the INSTALLED_APPS_CONFIG group.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1010</p></entry>
<entry colname="col3"><p>A group was provided that does not exist.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1019</p></entry>
<entry colname="col3"><p>"The ASSETS_DATA and USERS_CONFIG groups must be included with DOMAINS group."</p></entry>
</row>
<row>
<entry colname="col1"><p>500</p></entry>
<entry colname="col2"><p>1000</p></entry>
<entry colname="col3"><p>An error occurred during the attempt to create the restore.</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<title>Response Description</title>
<p>The created restore object containing the following fields:
 <ul>
 <li><b>id</b> - Long - The ID of the restore.</li>
 <li><b>initiated_by</b> - String - The user or authorized service that initiated the restore.</li>
 <li><b>host_id</b> - Long - The host that was restored. For more information, see the following Hosts API:
 <ul>
 		<li>api/config/deployment/hosts</li>
 </ul></li>
 <li><b>time_initiated</b> - Long - The number of milliseconds since epoch when the restore was started.</li>
 <li><b>time_completed</b> - Long - The number of milliseconds since epoch when the restore completed.</li>
 <li><b>status</b> - Enumeration - The status of the restore. The following values are available: PENDING, REQUESTING, INITIALIZING, IN_PROGRESS, FAILED, SUCCESS.
 <ul>
 		<li>PENDING: This is the initial state of the restore once it is created. From this state the restore can be updated to the REQUESTING state.</li>
 		<li>REQUESTING: After the status is set to REQUESTING, a restore request is sent to the Backup and Restore Engine to initialize it as a new restore.</li>
 		<li>INITIALIZING: After the restore request is received by the Backup and Restore Engine it will update the status to INITIALIZING.</li>
 		<li>IN_PROGRESS: After the restore process begins the status will be updated to IN_PROGRESS.</li>
 		<li>FAILED: If the restore has completed with errors the status will be updated to FAILED.</li>
 		<li>SUCCESS: If the restore has completed without errors the status will be updated to SUCCESS.</li>
 </ul></li>
 <li><b>is_cross_deployment_restore</b> - Boolean - If the associated backup is being restored on a different Console with a set of new managed hosts, the condition is set to 'true'; otherwise, the condition is set to 'false'.</li>
 <li><b>backup_id</b> - Long - The ID of the backup associated with the restore. Once the restore completes this value will be updated to null.</li>
 <li><b>backup_name</b> - String - The name of the backup that was restored.</li>
 <li><b>backup_version</b> - String - The QRadar version that corresponds to the backup that was restored.</li>
 <li><b>backup_type</b> - Enumeration - The backup type that was restored. This value will always be CONFIG.</li>
 <li><b>backup_filename</b> - String - The filename of the backup that was restored.</li>
 <li><b>groups</b> - Array of Enumeration - The set of groups that are included with the restore. These groups contain a subset of the following values: CUSTOM_RULES_CONFIG, DEPLOYMENT_CONFIG, USERS_CONFIG, LICENSE_CONFIG, QVM_CONFIG, INSTALLED_APPS_CONFIG, REPORT_TEMPLATES, ASSETS_DATA, OFFENSES_DATA.
 <ul>
 		<li>CUSTOM_RULES_CONFIG: Restores custom rules, reference sets, reference data, and saved searches. If you have rules that depend on items other than reference data and saved searches, you need to use DEPLOYMENT_CONFIG in addition to CUSTOM_RULES_CONFIG for rules to be fully functional.</li>
 		<li>DEPLOYMENT_CONFIG: Restores the deployment model and administrator controlled settings and content. This group includes, but is not limited to the following content: domains, log sources, flow sources, system settings, and forwarding rules.</li>
 		<li>USERS_CONFIG: Restores users, authorized services, user roles, security profiles, and dashboards.</li>
 		<li>LICENSE_CONFIG: NEEDS DESCRIPTION</li>
 		<li>QVM_CONFIG: NEEDS DESCRIPTION</li>
 		<li>INSTALLED_APPS_CONFIG: Restores installed applications.</li>
		<li>REPORT_TEMPLATES: Restores report templates.</li>
 		<li>ASSETS_DATA: Restores the asset model.</li>
 		<li>OFFENSES_DATA: Restores offenses. All offenses will be restored as closed.</li>
 </ul></li>
 </ul></p>
</refsyn>
<refsyn>
<title>Response Sample</title>
<codeblock>
{
    "backup_filename": "String",
    "backup_id": 42,
    "backup_name": "String",
    "backup_type": "String",
    "backup_version": "String",
    "groups": [
        "String"
    ],
    "host_id": 42,
    "id": 42,
    "initiated_by": "String",
    "is_cross_deployment_restore": true,
    "status": "String",
    "time_completed": 42,
    "time_initiated": 42
}
</codeblock>
</refsyn>
</refbody>
</reference>