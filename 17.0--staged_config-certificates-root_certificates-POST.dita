<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//IBM//DTD DITA IBM Reference//EN" "dtd/ibm-reference.dtd">
<reference id="api-17.0--staged_config-certificates-root_certificates-POST" xml:lang="en-us">
<title>POST /staged_config/certificates/root_certificates</title>
<shortdesc>Uploads a new single root certificate to the staged configuration folder on the Console.
This API enables the deployment of new root certificates to managed hosts, which enables the TLS
handshake between a managed host and a destination device. You must have System Administrator
permissions to use this endpoint.</shortdesc>
<prolog>
<metadata>
<keywords>
<apiname>/staged_config/certificates/root_certificates</apiname>
<keyword>POST</keyword>
<keyword>API</keyword>
<keyword>REST API</keyword>
</keywords>
</metadata>
</prolog>
<refbody>
<refsyn>
<p>The following steps are required to push the root certificate to the managed host: <ul>
<li>Invoke this synchronous endpoint to upload the new single root certificate to the staged
configuration folder on the Console.</li>
<li>Deploy the changes to push the new root certificate to the managed host.</li>
</ul>
</p>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /staged_config/certificates/root_certificates resource details</title>
<desc><p outputclass="summary">POST /staged_config/certificates/root_certificates resource details</p></desc>
<tgroup cols="1">
<colspec colname="col1" colwidth="1*" />
<thead>
<row valign="bottom">
<entry colname="col1">MIME Type</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>application/json
</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /staged_config/certificates/root_certificates request parameter details</title>
<desc><p outputclass="summary">POST /staged_config/certificates/root_certificates request parameter details</p></desc>
<tgroup cols="6">
<colspec colname="col1" colwidth="1*" />
<colspec colname="col2" colwidth="1*" />
<colspec colname="col3" colwidth="1*" />
<colspec colname="col4" colwidth="1*" />
<colspec colname="col5" colwidth="1*" />
<colspec colname="col6" colwidth="2*" />
<thead>
<row valign="bottom">
<entry colname="col1">Parameter</entry>
<entry colname="col2">Type</entry>
<entry colname="col3">Optionality</entry>
<entry colname="col4">Data Type</entry>
<entry colname="col5">MIME Type</entry>
<entry colname="col6">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>fields</p></entry>
<entry colname="col2"><p>header</p></entry>
<entry colname="col3"><p>Optional</p></entry>
<entry colname="col4"><p>String</p></entry>
<entry colname="col5"><p>text/plain</p></entry>
<entry colname="col6"><p>Optional - Use this parameter to specify which fields you would like to get back in the response. Fields that are not named are excluded. Specify subfields in brackets and multiple fields in the same object are separated by commas.</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /staged_config/certificates/root_certificates request body details</title>
<desc><p outputclass="summary">POST /staged_config/certificates/root_certificates request body details</p></desc>
<tgroup cols="5">
<colspec colname="col1" colwidth="1*" />
<colspec colname="col2" colwidth="1*" />
<colspec colname="col3" colwidth="1*" />
<colspec colname="col4" colwidth="2*" />
<colspec colname="col5" colwidth="2*" />
<thead>
<row valign="bottom">
<entry colname="col1">Parameter</entry>
<entry colname="col2">Data Type</entry>
<entry colname="col3">MIME Type</entry>
<entry colname="col4">Description</entry>
<entry colname="col5">Sample</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>certificate_content</p></entry>
<entry colname="col2"><p>String</p></entry>
<entry colname="col3"><p>text/plain</p></entry>
<entry colname="col4"><p>Required. The contents of a single PEM-encoded x509 root certificate to be uploaded to the Console.</p></entry>
<entry colname="col5"><p>String</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /staged_config/certificates/root_certificates response codes</title>
<desc><p outputclass="summary">POST /staged_config/certificates/root_certificates response codes</p></desc>
<tgroup cols="3">
<colspec colname="col1" colwidth="1*" />
<colspec colname="col2" colwidth="1*" />
<colspec colname="col3" colwidth="3*" />
<thead>
<row valign="bottom">
<entry colname="col1">HTTP Response Code</entry>
<entry colname="col2">Unique Code</entry>
<entry colname="col3">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>200</p></entry>
<entry colname="col2"><p/></entry>
<entry colname="col3"><p>The certificate has been uploaded.</p></entry>
</row>
<row>
<entry colname="col1"><p>409</p></entry>
<entry colname="col2"><p>1102</p></entry>
<entry colname="col3"><p>Certificate already exists.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1101</p></entry>
<entry colname="col3"><p>The certificate is invalid.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2001</p></entry>
<entry colname="col3"><p>Error parsing a certificate</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2002</p></entry>
<entry colname="col3"><p>Error parsing a certificate</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2003</p></entry>
<entry colname="col3"><p>The certificate is expired</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2004</p></entry>
<entry colname="col3"><p>The certificate is not yet valid</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2005</p></entry>
<entry colname="col3"><p>The certificate is revoked</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2010</p></entry>
<entry colname="col3"><p>Unexpected error occurred when processing a certificate</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2011</p></entry>
<entry colname="col3"><p>Error finding issuer certificates</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2012</p></entry>
<entry colname="col3"><p>The certificate's key usage or extended key usage does not match to its purpose</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2013</p></entry>
<entry colname="col3"><p>Error validating the full chain of the certificate</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2014</p></entry>
<entry colname="col3"><p>The certificate is an invalid self-signed certificate</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2020</p></entry>
<entry colname="col3"><p>The CRL is invalid</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2030</p></entry>
<entry colname="col3"><p>Unexpected error when processing CRL</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2031</p></entry>
<entry colname="col3"><p>Error finding the issuer certificates for the CRL</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2032</p></entry>
<entry colname="col3"><p>The issuer does not have CRL signing authority.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2033</p></entry>
<entry colname="col3"><p>Error validating the CRL</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>2034</p></entry>
<entry colname="col3"><p>The CRL is expired</p></entry>
</row>
<row>
<entry colname="col1"><p>500</p></entry>
<entry colname="col2"><p>1020</p></entry>
<entry colname="col3"><p>for unknown exception error code 500</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<title>Response Description</title>
<p>Displays the following information about the certificate resource:
 	<ul>
	<li><b>id</b> - Uniquely identifies the certificate. This value is derived from <i>subject_key_id</i>.</li>
	<li><b>subject_key_id</b> - Returns the Subject Key Identifier of the CA certificate.</li>
	<li><b>authority_key_id</b> - Returns the Authority Key Identifier of the CA certificate.</li>
	<li><b>subject</b> - Returns the Subject of the CA certificate.	</li>
	<li><b>issuer</b> - Returns the Issuer of the CA certificate.</li>
	<li><b>not_before</b> - Returns the "Validity Not Before" field of the certificate, represented as the number of milliseconds since UNIX epoch. </li>
   <li><b>expiry</b> - Returns the "Validity Not After" field of the certificate, represented as the number of milliseconds since UNIX epoch.Â </li>
   <li><b>serial_number</b> - Returns the "Serial Number" field of the certificate.</li>
 	 <li><b>key_usage</b> - Returns the "Key Usage" field of the certificate. The values are one or more of the enum X509Certificate.KeyUsage
 		 <ul>
 	 	    <li>CRL_SIGN</li>
 	 	    <li>DATA_ENCIPHERMENT</li>
 		     <li>DECIPHER_ONLY</li>
 	 	    <li>DIGITAL_SIGNATURE</li>
 	 	    <li>ENCIPHER_ONLY</li>
 		     <li>KEY_AGREEMENT</li>
 		     <li>KEY_CERT_SIGN</li>
 	 	    <li>KEY_ENCIPHERMENT</li>
 	 	    <li>NON_REPUDIATION</li>
 	 	 </ul>
 	 </li>
   <li><b>status</b> - Returns the status of the certificate. After you upload the certificate, the value will be DEPLOY_PENDING to indicate that the changes must be deployed.</li>
      <li><b>validation</b> - Returns the code to indicate whether the certificate is valid. If not, it returns the reason that the certificate is not valid.
      	<ul>
                <li>0 - Certificate is valid or has not been checked. </li>
                <li>2001 - Error parsing a certificate.</li>
                <li>2002 - Error decoding a certificate.</li>
                <li>2003 - The certificate is expired.</li>
                <li>2004 - The certificate is not yet valid.</li>
                <li>2005 - The certificate is revoked.</li>
                <li>2010 - An unexpected error occurred when processing a certificate.</li>
                <li>2011 - Error finding the issuer certificates.</li>
                <li>2012 - The certificate's key usage or extended key usage does not match its purpose.</li>
                <li>2013 - Error validating the full chain of the certificate.</li>
                <li>2014 - The certificate is an invalid self-signed certificate.</li>
                <li>2020 - The CRL is invalid.</li>
                <li>2030 - Unexpected error when processing the CRL.</li>
                <li>2031 - Error finding the issuer certificates for the CRL.</li>
                <li>2032 - The issuer does not have the <i>CRL sign</i> usage.</li>
                <li>2033 - Error validating the CRL.</li>
                <li>2034 - The CRL is expired.</li>
	        </ul></li>
        </ul></p>
</refsyn>
<refsyn>
<title>Response Sample</title>
<codeblock>
{
    "authority_key_id": "String",
    "expiry": 42,
    "id": "String",
    "issuer": [
        {
            "field_name": "String",
            "value": "String"
        }
    ],
    "key_usage": [
        "String &lt;one of: CRL_SIGN, DATA_ENCIPHERMENT, DECIPHER_ONLY, DIGITAL_SIGNATURE, ENCIPHER_ONLY, KEY_AGREEMENT, KEY_CERT_SIGN, KEY_ENCIPHERMENT, NON_REPUDIATION&gt;"
    ],
    "not_before": 42,
    "serial_number": "String",
    "status": "String",
    "subject": [
        {
            "field_name": "String",
            "value": "String"
        }
    ],
    "subject_key_id": "String",
    "validation": 42
}
</codeblock>
</refsyn>
</refbody>
</reference>