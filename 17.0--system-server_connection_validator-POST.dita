<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE reference PUBLIC "-//IBM//DTD DITA IBM Reference//EN" "dtd/ibm-reference.dtd">
<reference id="api-17.0--system-server_connection_validator-POST" xml:lang="en-us">
<title>POST /system/server_connection_validator</title>
<shortdesc>Creates a server connection validator for the provided hostname and port, based
          on the provided host ids.</shortdesc>
<prolog>
<metadata>
<keywords>
<apiname>/system/server_connection_validator</apiname>
<keyword>POST</keyword>
<keyword>API</keyword>
<keyword>REST API</keyword>
</keywords>
</metadata>
</prolog>
<refbody>
<refsyn>
<p>Creates a new server connection validator. Server connection validator is used to
 determine if a server in the deployment can connect to a given hostname and port.
 If a server does not have access to the hostname and port, it gives feedback on why the
 connection was not possible.  The validator for each server in the deployment is returned
 in the response from the server.  The validator or the hostname/port is not persisted.</p>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /system/server_connection_validator resource details</title>
<desc><p outputclass="summary">POST /system/server_connection_validator resource details</p></desc>
<tgroup cols="1">
<colspec colname="col1" colwidth="1*" />
<thead>
<row valign="bottom">
<entry colname="col1">MIME Type</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>application/json
</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /system/server_connection_validator request parameter details</title>
<desc><p outputclass="summary">POST /system/server_connection_validator request parameter details</p></desc>
<tgroup cols="6">
<colspec colname="col1" colwidth="1*" />
<colspec colname="col2" colwidth="1*" />
<colspec colname="col3" colwidth="1*" />
<colspec colname="col4" colwidth="1*" />
<colspec colname="col5" colwidth="1*" />
<colspec colname="col6" colwidth="2*" />
<thead>
<row valign="bottom">
<entry colname="col1">Parameter</entry>
<entry colname="col2">Type</entry>
<entry colname="col3">Optionality</entry>
<entry colname="col4">Data Type</entry>
<entry colname="col5">MIME Type</entry>
<entry colname="col6">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>fields</p></entry>
<entry colname="col2"><p>header</p></entry>
<entry colname="col3"><p>Optional</p></entry>
<entry colname="col4"><p>String</p></entry>
<entry colname="col5"><p>text/plain</p></entry>
<entry colname="col6"><p>Optional - Use this parameter to specify which fields you would like to get back in the response. Fields that are not named are excluded. Specify subfields in brackets and multiple fields in the same object are separated by commas.</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /system/server_connection_validator request body details</title>
<desc><p outputclass="summary">POST /system/server_connection_validator request body details</p></desc>
<tgroup cols="5">
<colspec colname="col1" colwidth="1*" />
<colspec colname="col2" colwidth="1*" />
<colspec colname="col3" colwidth="1*" />
<colspec colname="col4" colwidth="2*" />
<colspec colname="col5" colwidth="2*" />
<thead>
<row valign="bottom">
<entry colname="col1">Parameter</entry>
<entry colname="col2">Data Type</entry>
<entry colname="col3">MIME Type</entry>
<entry colname="col4">Description</entry>
<entry colname="col5">Sample</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>request_details</p></entry>
<entry colname="col2"><p>Object</p></entry>
<entry colname="col3"><p>application/json</p></entry>
<entry colname="col4"><p><ul>
 <li><b>hostname</b> - String - The hostname to attempt a connection to.</li>
 <li><b>port</b> - Integer - The port to attempt a connection to.</li>
 <li><b>hosts</b> - List&lt;Host> - List of Hosts to perform the connection check on. Defaults to
all active hosts in the deployment.<ul>
<li><b>id</b> - ID of the host.</li>
</ul></li>
 </ul></p></entry>
<entry colname="col5"><p>{
    "hostname": "String",
    "hosts": [
        {
            "connection_result": "String &lt;one of: SUCCESS, MANAGEDHOST_UNREACHABLE, UNREACHABLE&gt;",
            "id": 42
        }
    ],
    "port": 42
}</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<table pgwide="0">
<title>POST /system/server_connection_validator response codes</title>
<desc><p outputclass="summary">POST /system/server_connection_validator response codes</p></desc>
<tgroup cols="3">
<colspec colname="col1" colwidth="1*" />
<colspec colname="col2" colwidth="1*" />
<colspec colname="col3" colwidth="3*" />
<thead>
<row valign="bottom">
<entry colname="col1">HTTP Response Code</entry>
<entry colname="col2">Unique Code</entry>
<entry colname="col3">Description</entry>
</row>
</thead>
<tbody>
<row>
<entry colname="col1"><p>200</p></entry>
<entry colname="col2"><p/></entry>
<entry colname="col3"><p>response with a server connection
                         validator. The successful 200 response is returned
                         regardless if any connection checks passed the
                         validation or not.  The 200 response indicates the
                         validation was performed. Details of the validation
                         will be in the returned validator structure.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1001</p></entry>
<entry colname="col3"><p>The hostname is not well formed.</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1002</p></entry>
<entry colname="col3"><p>The port must be between 1 and 65535 (inclusive).</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1003</p></entry>
<entry colname="col3"><p>One of the given host IDs were not valid</p></entry>
</row>
<row>
<entry colname="col1"><p>422</p></entry>
<entry colname="col2"><p>1004</p></entry>
<entry colname="col3"><p>One of the specified hosts were not Active</p></entry>
</row>
<row>
<entry colname="col1"><p>500</p></entry>
<entry colname="col2"><p>1005</p></entry>
<entry colname="col3"><p>Encountered a server processing error while attempting to fetch deployment information.</p></entry>
</row>
<row>
<entry colname="col1"><p>500</p></entry>
<entry colname="col2"><p>1006</p></entry>
<entry colname="col3"><p>Encountered a server error while performing the connection validation.</p></entry>
</row>
</tbody>
</tgroup>
</table>
</refsyn>
<refsyn>
<title>Response Description</title>
<p>A Server Connection Validator with the following fields:
         <ul>
         <li><b>hostname</b> - The hostname the connection was attempted to.</li>
         <li><b>port</b> - The port the connection was attempted to.</li>
         <li><b>hosts</b> - The hosts connection information. Each host contains the following
information: <ul>
<li><b>id</b> - The host ID the connection was attempted on.</li>
<li><b>connection_result</b> - Enum representing the connection status. SUCCESS, UNREACHABLE,
MANAGEDHOST_UNREACHABLE</li>
</ul></li>
         </ul></p>
</refsyn>
<refsyn>
<title>Response Sample</title>
<codeblock>
{
    "hostname": "String",
    "hosts": [
        {
            "connection_result": "String &lt;one of: SUCCESS, MANAGEDHOST_UNREACHABLE, UNREACHABLE&gt;",
            "id": 42
        }
    ],
    "port": 42
}
</codeblock>
</refsyn>
</refbody>
</reference>